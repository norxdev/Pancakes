<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css?v=2">

  <link rel="icon" href="faviconAF-v2.png" type="image/png">
  <link rel="apple-touch-icon" href="faviconAF-v2.png">

  <title>Armour Flipper | Feedback</title>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0],
          j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
      j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-K6L68P6W');
  </script>
</head>
<body>
  <!-- GTM (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K6L68P6W"
    height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <!-- Header -->
  <header class="sticky-header">
    <div class="header-left">
      <div class="site-title" style="cursor:pointer;" onclick="window.location.href='https://www.armourflipper.com';">
        <img src="faviconAF-v2.png" alt="AF Icon" class="title-icon">
        Armour Flipper
      </div>
    </div>
    <div class="header-right">
      <a class="donate-btn-header" href="https://www.paypal.com/donate/?hosted_button_id=YVZNTWZP8JUCC" target="_blank">Donate</a>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">
    <form id="feedbackForm" class="feedback-form">
      <label for="category">Category:</label>
      <select id="category" name="subject" required>
        <option value="">Select...</option>
        <option value="general">General Feedback</option>
        <option value="bug">Report a Bug</option>
        <option value="suggestion">Feature Suggestion</option>
        <option value="other">Other</option>
      </select>

      <label for="message">Message:</label>
      <textarea id="message" name="message" placeholder="Type your message" required></textarea>

      <button type="submit" class="submit-btn">Submit Feedback</button>
      <a href="https://www.armourflipper.com" class="go-back-btn">Go Back</a>

      <p id="successMessage" style="color: var(--accent); display:none; margin-top:12px;">
        Thank you! Your feedback has been submitted.
      </p>
      <p id="errorMessage" style="color: #ff3d00; display:none; margin-top:12px;">
        Error submitting feedback. Please try again.
      </p>
    </form>
  </main>

  <!-- Footer -->
  <footer id="pageFooter" style="text-align:center; padding:10px; font-size:0.9rem; color:#888; margin-top:20px;">
    &copy; <span id="currentYear"></span> Armour Flipper. Created by Norxdev.
  </footer>

  <script>
    document.getElementById('currentYear').textContent = new Date().getFullYear();

    const form = document.getElementById('feedbackForm');
    const submitBtn = form.querySelector('.submit-btn');
    const successMsg = document.getElementById('successMessage');
    const errorMsg = document.getElementById('errorMessage');
    const goBackBtn = form.querySelector('.go-back-btn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      submitBtn.disabled = true;
      submitBtn.textContent = "Submitting...";
      successMsg.style.display = 'none';
      errorMsg.style.display = 'none';

      const formData = new FormData(form);

      try {
        const response = await fetch('https://formbold.com/s/3K4Z0', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          // Remove form fields and submit button
          form.querySelectorAll('label, select, textarea, button').forEach(el => el.remove());
          successMsg.style.display = 'block';
          goBackBtn.style.display = 'inline-block';
        } else {
          errorMsg.style.display = 'block';
          submitBtn.disabled = false;
          submitBtn.textContent = "Submit Feedback";
        }
      } catch(err){
        errorMsg.style.display = 'block';
        submitBtn.disabled = false;
        submitBtn.textContent = "Submit Feedback";
      }
    });
  </script>
</body>
</html>
